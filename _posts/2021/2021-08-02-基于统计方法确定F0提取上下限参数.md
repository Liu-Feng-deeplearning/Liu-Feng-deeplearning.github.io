---
layout: post
title: 基于统计方法确定F0提取上下限参数
categories: 深度学习，音频信号处理
description:  
keywords: 深度学习，音频信号处理
---

在语音任务中，f0(pitch) 提取是必不可少的重要一环。常见的 pitch 提取算法，
包括 praat/Sptk 等，在提取过程中，重要的两个参数是 f0_min 和 f0_max，上下限设置错误可能会导致基频发生 "倍频" or "半频" 错误。

[pitch 提取算法](https://github.com/Liu-Feng-deeplearning/Pitch_and_Duration_Tuner/blob/main/pitch.py)


f0 半频错误: 在提取 f0 的过程中，因为周期计算错误，导致提取值为真实值一半，从而发生错误。

这两个参数因人而异，例如男女说话人的基频范围可能差别较大，因而直接确定有时并不靠谱，
听大师介绍了一个基于数据统计的方法，感觉很有效，记录如下：

### 基于统计方法确定F0提取上下限参数


针对干净的、讲话、单人tts质量数据，一个建议的提取 Pitch(f0) 流程:



1. 对每个发音人，说话的数据，使用30-1000的参数预提取
2. 画出 f0 对应统计直方图，看图决定上下限
3. 上限通常ok，设定成800左右，一般没有问题。如果看到800导致右侧的分布包络不平滑，才需要调高，比如有些歌声数据。
4. 下限以不出现低频部分额外的一个分布尖峰为准，比如图中70那里存在尖峰，那么下限设置在70，可以消除掉这个尖峰，
确保比较高的提取准确率，有兴趣可以去看看这bug小尖峰是在什么样的音频上提取到的。
5. 用找到的上下限重新提取一次基频，注意仅之前的提取结果基础上删掉bug尖峰是不对，解决不了半频错误问题。

![test](https://github.com/Liu-Feng-deeplearning/Liu-Feng-deeplearning.github.io/blob/master/images/posts/2021/2021_08_02_pitch_hint.png)


使用该流程提取训练参数，求均值，会比较准确。

说明： 针对**干净的、讲话、单人tts质量**数据，效果比较理想。


